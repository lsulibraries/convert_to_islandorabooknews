Building the docker image

# From inside the dora box:

apt install wget zip software-properties-common -y
add-apt-repository ppa:deadsnakes/ppa
apt update
apt install python3.6-dev python3.6-venv pdftk build-essential libpoppler-cpp-dev pkg-config

Starting scripts

rm /usr/bin/python3
ln -s /usr/bin/python3.6 /usr/bin/python3
pip install pdftotext


# Get the source institution-namespace-cpd.zip or institution-namespace-pdf.zip into the dora build.  (Scp, shared folder, or elsewise.)

# Unzip the file to some folder.

python3 convert_jp2cpd_to_book_with_derivs.py input/file/path/institution-namespace-cpd

# or 

python3 convert_pdf_to_book_with_derivs.py input/file/path/institution-namespace-pdf

If the process breaks, you can delete the most recent folders & the script will skip the ones you've already made.  However, if any folders are partially made, it will skip them too -- so when in doubt, delete the output folders.

# QA the output when done

python3 validate_obj_mods.py {output_folder}

# Remove all file restrictions & zip the folder

sudo chmod -R u+rwX,go+rX,go-w {output_folder}
zip -r -0 {/tmp/whatever_filename.zip} {output_folder}
