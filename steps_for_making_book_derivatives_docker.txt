Building the docker image

# make a Dockerfile
# you are root inside docker, so no sudo ....
git clone 'docker ubuntu 14.04 image plus apt install imagemagick terreract-ocr'

# from within the directory with the Dockerfile
docker build  .

# To make a container from an image (adding a bound folder to the container)
# You can make several containers of an image, for parallel tasks
docker run -it -v {local_folder}:{name_for_folder_inside_container} {name_of_image}
docker run -it -v /home/francis/Desktop/DockerForDerivRegen/shared:/home/docker/share 21984656ae58

# To stop the container
exit

# to show what containers you have built.  they will have a nickname on the right for referencing them later.
docker ps -a 

# to see what images you've downloaded
docker images -a

# images keep the settings for shared folders, installed packages, etc.
# -i says you want a terminal open to item
docker start -i {image nickname}


Starting a container of an image

# you can start up multiple containers of the same image by:
docker run -it -v {image_nickname}


Loading software into container:
	- Container remembers install programs, settings, etc on restart
	- Only have to install programs once.

From inside your docker container, run:

apt install wget zip software-properties-common -y
add-apt-repository ppa:deadsnakes/ppa
apt update
apt install python3.6-dev libopenjpeg2* imagemagick -y

Starting scripts

rm /usr/bin/python3
ln -s /usr/bin/python3.6 /usr/bin/python3


From your outside computer, copy your Book source folder into the docker-shared folder


Install kakadu inside docker:

	cd /usr/local/bin

	sudo wget http://kakadusoftware.com/wp-content/uploads/2014/06/KDU7A2_Demo_Apps_for_Centos7-x86-64_170827.zip
	unzip KDU7A2_Demo_Apps_for_Centos7-x86-64_170827.zip
	rm KDU7A2_Demo_Apps_for_Centos7-x86-64_170827.zip
	mv KDU7A2_Demo_Apps_for_Centos7-x86-64_170827/* .
	rm -R KDU7A2_Demo_Apps_for_Centos7-x86-64_170827/
	export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib
	mv libkdu_v7AR.so /usr/local/lib

Install tesseract:
	apt install autoconf libtool build-essential libpng12-dev libpng12-dev libtiff5-dev tesseract-ocr


